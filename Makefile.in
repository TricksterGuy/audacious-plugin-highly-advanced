CC=@CC@
CPP=@CXX@
LD=$(CPP)

CFLAGS=@CFLAGS@
CXXFLAGS=@CXXFLAGS@ -std=c++11
LDFLAGS=@LDFLAGS@ -L/usr/local/lib -laudcore

OBJS=gsf.o VBA/GBA.o VBA/Globals.o VBA/Sound.o VBA/Util.o VBA/bios.o VBA/memgzio.o VBA/snd_interp.o VBA/unzip.o VBA/psftag.o plugin.o

all: $(OBJS) 
	$(LD) $(OBJS) $(LDFLAGS) -o vba.a

%.o: %.c %.h
	$(CC) $(CFLAGS) -c $< -o $@

%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

%.o: %.cpp
	$(CPP) $(CFLAGS) -c $< -o $@

%.o: %.cpp %.h
	$(CPP) $(CFLAGS) -c $< -o $@

clean:
	rm -rf *.o VBA/*.o playgsf autom4te.cache

distclean: 
	rm -f *.o VBA/*.o playgsf config.cache config.status Makefile config.h config.log
